openapi: 3.0.0
info:
  title: Interop Trouble Ticket
  description: >+
    Based on **TMF API Reference : TMF - 621 Trouble Ticket 4.0.0**

  version: 1.0.0
tags:
  - name: troubleTicket
  - name: hub
servers:
  - url: https://serverRoot/troubleTicket/v1
paths:
  /troubleTicket:
    get:
      operationId: listTroubleTicket
      summary: List or find TroubleTicket objects
      description: This operation list or find TroubleTicket entities
      tags:
        - troubleTicket
      parameters:
        - name: fields
          description: Comma-separated properties to be provided in response
          required: false
          in: query
          schema:
            type: string
        - name: status
          in: query
          description: Filter status
          schema:
            type: string
          style: form
        - name: status[]
          in: query
          description: Filter status[]
          schema:
            type: array
            items:
              type: string
              description: Filter status[]
          style: form
        - name: lastUpdate[before]
          in: query
          description: Filter lastUpdate[before]
          schema:
            type: string
          style: form
        - name: lastUpdate[strictly_before]
          in: query
          description: Filter lastUpdate[strictly_before]
          schema:
            type: string
          style: form
        - name: lastUpdate[after]
          in: query
          description: Filter lastUpdate[after]
          schema:
            type: string
          style: form
        - name: lastUpdate[strictly_after]
          in: query
          description: Filter lastUpdate[strictly_after]
          schema:
            type: string
          style: form
        - name: creationDate[before]
          in: query
          description: Filter creationDate[before]
          schema:
            type: string
          style: form
        - name: creationDate[strictly_before]
          in: query
          description: Filter creationDate[strictly_before]
          schema:
            type: string
          style: form
        - name: creationDate[after]
          in: query
          description: Filter creationDate[after]
          schema:
            type: string
          style: form
        - name: creationDate[strictly_after]
          in: query
          description: Filter creationDate[strictly_after]
          schema:
            type: string
          style: form
        - name: offset
          description: Requested index for start of resources to be provided in response
          required: false
          in: query
          schema:
            type: integer
        - name: limit
          description: Requested number of resources to be provided in response
          required: false
          in: query
          schema:
            type: integer
      responses:
        "200":
          description: Success
          headers:
            X-Result-Count:
              description: Actual number of items returned in the response body
              schema:
                type: integer
            X-Total-Count:
              description: Total number of items matching criteria
              schema:
                type: integer
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TroubleTicket"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "405":
          description: Method Not allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      operationId: createTroubleTicket
      summary: Creates a TroubleTicket
      description: This operation creates a TroubleTicket entity.
      tags:
        - troubleTicket
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TroubleTicket_Create"
        description: The TroubleTicket to be created
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TroubleTicket"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "405":
          description: Method Not allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  "/troubleTicket/{id}":
    get:
      operationId: retrieveTroubleTicket
      summary: Retrieves a TroubleTicket by ID
      description: This operation retrieves a TroubleTicket entity. Attribute selection is
        enabled for all first level attributes.
      tags:
        - troubleTicket
      parameters:
        - name: id
          description: Identifier of the TroubleTicket
          required: true
          in: path
          schema:
            type: string
        - name: fields
          description: Comma-separated properties to provide in response
          required: false
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TroubleTicket"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "405":
          description: Method Not allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch:
      operationId: patchTroubleTicket
      summary: Updates partially a TroubleTicket
      description: This operation updates partially a TroubleTicket entity.
      tags:
        - troubleTicket
      parameters:
        - name: id
          description: Identifier of the TroubleTicket
          required: true
          in: path
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TroubleTicket_Update"
        description: The TroubleTicket to be updated
        required: true
      responses:
        "200":
          description: Updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TroubleTicket"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "405":
          description: Method Not allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /hub:
    post:
      summary: Subscribe to notification
      operationId: hub
      tags:
        - hub
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                callback: # Callback URL
                  type: string
                  format: uri
                  example: https://myserver.com/send/callback
                  maxLength: 2048
                query:
                  type: string
                  format: uri
                  maxLength: 2048
              required:
                - callback
                - query
      callbacks:
        troubleTicketStatusChangeEvent:
          '{$request.body#/callback}/{$request.query.eventType}':
            post:
              requestBody: # Contents of the callback message
                required: true
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/TroubleTicketStatusChangeEvent"
              responses: # Expected responses to the callback message
                '201':
                  description: Your server returns this code if it accepts the callback
        troubleTicketAttributeValueChangeEvent:
          '{$request.body#/callback}/{$request.query.eventType}':
            post:
              requestBody: # Contents of the callback message
                required: true
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/TroubleTicketAttributeValueChangeEvent"
              responses: # Expected responses to the callback message
                '201':
                  description: Your server returns this code if it accepts the callback
      responses:
        "201":
          description: Subscribed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EventSubscription"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "405":
          description: Method Not allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  "/hub/{id}":
    delete:
      operationId: unsubscribe
      summary: Unsubscribe to notification
      tags:
        - hub
      parameters:
        - name: id
          required: true
          in: path
          description: The id of the registered listener
          schema:
            type: string
      responses:
        "204":
          description: Deleted
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "405":
          description: Method not allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
components:
  schemas:
    AttachmentRef:
      type: object
      description: Attachment reference. An attachment complements the description of an
        element (for instance a product) through video, pictures
      properties:
        id:
          type: string
          description: Unique-Identifier for this attachment
        href:
          type: string
          description: URL serving as reference for the attachment resource
          maxLength: 2048
        description:
          type: string
          description: A narrative text describing the content of the attachment
        name:
          type: string
          description: Name of the related entity.
        url:
          type: string
          description: Link to the attachment media/content
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
        "@referredType":
          type: string
          description: The actual type of the target instance when needed for
            disambiguation.
      required:
        - id
    Note:
      type: object
      description: Extra information about a given entity
      properties:
        id:
          type: string
          description: Identifier of the note within its containing entity (may or may not
            be globally unique, depending on provider implementation)
        author:
          type: string
          description: Author of the note
        date:
          type: string
          format: date-time
          description: Date of the note
        text:
          type: string
          description: Text of the note
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
    RelatedEntity:
      type: object
      description: A reference to an entity, where the type of the entity is not known in
        advance.
      required:
        - "@referredType"
        - id
        - role
      properties:
        id:
          type: string
          description: Unique identifier of a related entity.
        href:
          type: string
          description: Reference of the related entity.
          maxLength: 2048
        name:
          type: string
          description: Name of the related entity.
        role:
          type: string
          description: The role of an entity.
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
        "@referredType":
          type: string
          description: The actual type of the target instance when needed for
            disambiguation.
    RelatedParty:
      type: object
      description: Related Entity reference. A related party defines party or party role linked to a specific entity.
      required:
        - '@referredType'
        - id
      properties:
        id:
          type: string
          description: Unique identifier of a related entity.
        href:
          type: string
          description: Reference of the related entity.
          maxLength: 2048
        name:
          type: string
          description: Name of the related entity.
        role:
          type: string
          description: Role played by the related party
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
        "@referredType":
          type: string
          description: The actual type of the target instance when needed for disambiguation.
    StatusChange:
      type: object
      description: Holds the status notification reasons and associated date the status
        changed, populated by the server
      properties:
        changeDate:
          type: string
          format: date-time
          description: The date and time the status changed.
        changeReason:
          type: string
          description: The reason why the status changed.
        status:
          type: string
          description: The status of the trouble ticket
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
    TroubleTicket:
      type: object
      description: A trouble ticket is a record of an issue that is created, tracked, and
        managed by a trouble ticket management system
      properties:
        id:
          type: string
          description: Unique identifier of the trouble ticket
        href:
          type: string
          description: Hyperlink, a reference to the trouble ticket entity
        creationDate:
          type: string
          format: date-time
          description: The date on which the trouble ticket was created
        description:
          type: string
          description: Description of the trouble or issue
        expectedResolutionDate:
          type: string
          format: date-time
          description: The expected resolution date determined by the trouble ticket system
        externalId:
          type: string
          description: Additional identifier coming from an external system
        lastUpdate:
          type: string
          format: date-time
          description: The date and time that the trouble ticked was last updated
        name:
          type: string
          description: Name of the trouble ticket, typically a short description provided
            by the user that create the ticket
        priority:
          type: string
          description: |-
            The priority of the trouble ticket and how quickly the issue should be resolved. Example: Critical, High, Medium, Low.
            The value is set by the ticket management system considering the severity, ticket type etc...'
        resolutionDate:
          type: string
          format: date-time
          description: The date and time the trouble ticket was resolved
        severity:
          type: string
          description: |-
            The severity of the issue. Indicate the implication of the issue on the expected functionality e.g. of a system, application, service etc..
            Severity values can be for example : Critical, Major, Minor
        statusChangeDate:
          type: string
          format: date-time
          description: The date and time the status changed.
        statusChangeReason:
          type: string
          description: The reason for changing the status
        ticketType:
          type: string
          description: |-
            represents a business type of the trouble ticket
            AnomalieIPE :
            - AnomalieAdresse.modification
            - AnomalieAdresse.creation
            - AnomalieAdresse.demandeInformations
            - AnomalieAdresse.nonRespectProtocole
            Malfaçons :
            - Malfacon
        complexity:
          $ref: "#/components/schemas/ComplexityType"
        attachment:
          type: array
          items:
            $ref: "#/components/schemas/AttachmentRef"
          description: File(s) attached to the trouble ticket. e.g. pictur of broken
            device, scaning of a bill or charge
        note:
          type: array
          items:
            $ref: "#/components/schemas/Note"
          description: The note(s) that are associated to the ticket.
        relatedEntity:
          type: array
          items:
            $ref: "#/components/schemas/RelatedEntity"
          description: An entity that is related to the ticket such as a bill, a product,
            etc. The entity against which the ticket is associated.
        relatedParty:
          type: array
          items:
            $ref: "#/components/schemas/RelatedParty"
          description: The related party(ies) that are associated to the ticket.
        status:
          $ref: "#/components/schemas/TroubleTicketStatusType"
        statusChange:
          type: array
          items:
            $ref: "#/components/schemas/StatusChange"
          description: The status change history that are associated to the
            ticket.Populated by the server
        troubleTicketRelationship:
          type: array
          items:
            $ref: "#/components/schemas/TroubleTicketRelationship"
          description: A list of trouble ticket relationships (TroubleTicketRelationship
            [*]). Represents a relationship between trouble tickets
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
    TroubleTicket_Create:
      type: object
      description: >-
        A trouble ticket is a record of an issue that is created, tracked, and
        managed by a trouble ticket management system

        Skipped properties: id,href
      required:
        - description
        - ticketType
        - severity
      properties:
        description:
          type: string
          description: Description of the trouble or issue
        externalId:
          type: string
          description: Additional identifier coming from an external system
        name:
          type: string
          description: Name of the trouble ticket, typically a short description provided
            by the user that create the ticket
        severity:
          type: string
          description: |-
            The severity of the issue. Indicate the implication of the issue on the expected functionality e.g. of a system, application, service etc..
            Severity values can be for example : Critical, Major, Minor
        ticketType:
          type: string
          description: represent a business type of the trouble ticket e.g. incident,
            complain, request
        attachment:
          type: array
          items:
            $ref: "#/components/schemas/AttachmentRef"
          description: File(s) attached to the trouble ticket. e.g. pictur of broken
            device, scaning of a bill or charge
        note:
          type: array
          items:
            $ref: "#/components/schemas/Note"
          description: The note(s) that are associated to the ticket.
        relatedEntity:
          type: array
          items:
            $ref: "#/components/schemas/RelatedEntity"
          description: An entity that is related to the ticket such as a bill, a product,
            etc. The entity against which the ticket is associated.
        relatedParty:
          type: array
          items:
            $ref: "#/components/schemas/RelatedParty"
          description: The related party(ies) that are associated to the ticket.
        troubleTicketRelationship:
          type: array
          items:
            $ref: "#/components/schemas/TroubleTicketRelationship"
          description: A list of trouble ticket relationships (TroubleTicketRelationship
            [*]). Represents a relationship between trouble tickets
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
    TroubleTicket_Update:
      type: object
      description: >-
        A trouble ticket is a record of an issue that is created, tracked, and
        managed by a trouble ticket management system

        Skipped properties: id,href,creationDate,lastUpdate,statusChange,statusChangeDate
      properties:
        status:
          $ref: "#/components/schemas/TroubleTicketStatusType"
        statusChangeReason:
          type: string
          description: The reason for changing the status
        attachment:
          type: array
          items:
            $ref: "#/components/schemas/AttachmentRef"
          description: File(s) attached to the trouble ticket. e.g. pictur of broken
            device, scaning of a bill or charge
        note:
          type: array
          items:
            $ref: "#/components/schemas/Note"
          description: The note(s) that are associated to the ticket.
        severity:
          type: string
          description: |-
            The severity of the issue. Indicate the implication of the issue on the expected functionality e.g. of a system, application, service etc..
            Severity values can be for example : Critical, Major, Minor
        relatedParty:
          type: array
          items:
            $ref: "#/components/schemas/RelatedParty"
          description: The related party(ies) that are associated to the ticket.
        troubleTicketRelationship:
          type: array
          items:
            $ref: "#/components/schemas/TroubleTicketRelationship"
          description: A list of trouble ticket relationships (TroubleTicketRelationship
            [*]). Represents a relationship between trouble tickets
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
    TroubleTicketRelationship:
      type: object
      description: Represents a relationship between trouble Trouble Tickets
      properties:
        id:
          type: string
          description: Unique identifier of the Trouble Ticket
        href:
          type: string
          description: Reference of the Trouble Ticket
          maxLength: 2048
        name:
          type: string
          description: Name of the Trouble Ticket
        relationshipType:
          type: string
          description: Type of the  Trouble Ticket relationship can be isChiled, dependent
            etc...
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name
    TroubleTicketStatusType:
      type: string
      description: Possible values for the status of the trouble ticket
      enum:
        - acknowledged
        - rejected
        - pending
        - held
        - inProgress
        - cancelled
        - closed
        - resolved
    ComplexityType:
      type: object
      enum:
        - low
        - medium
        - high
    Error:
      description: Used when an API throws an Error, typically with a HTTP error
        response-code (3xx, 4xx, 5xx)
      type: object
      required:
        - code
        - reason
      properties:
        code:
          type: string
          description: Application relevant detail, defined in the API or a common list.
        reason:
          type: string
          description: Explanation of the reason for the error which can be shown to a
            client user.
        message:
          type: string
          description: More details and corrective actions related to the error which can
            be shown to a client user.
        status:
          type: string
          description: HTTP Error code extension
        referenceError:
          type: string
          format: uri
          description: URI of documentation describing the error.
        "@baseType":
          type: string
          description: When sub-classing, this defines the super-class.
        "@schemaLocation":
          type: string
          format: uri
          description: A URI to a JSON-Schema file that defines additional attributes and
            relationships
        "@type":
          type: string
          description: When sub-classing, this defines the sub-class entity name.
    TroubleTicketStatusChangeEvent:
      type: object
      description: The notification data structure
      properties:
        eventId:
          type: string
          description: The identifier of the notification.
        eventTime:
          type: string
          format: date-time
          description: Time of the event occurrence.
        eventType:
          type: string
          description: The type of the notification.
        correlationId:
          type: string
          description: The correlation id for this event.
        domain:
          type: string
          description: The domain of the event.
        title:
          type: string
          description: The title of the event.
        description:
          type: string
          description: A description of the event.
        priority:
          type: string
          description: A priority.
        timeOcurred:
          type: string
          format: date-time
          description: The time the event occured.
        event:
          $ref: "#/components/schemas/TroubleTicketStatusChangeEventPayload"
    TroubleTicketStatusChangeEventPayload:
      type: object
      description: The event data structure
      properties:
        troubleTicket:
          $ref: "#/components/schemas/TroubleTicket"
    TroubleTicketAttributeValueChangeEvent:
      type: object
      description: The notification data structure
      properties:
        eventId:
          type: string
          description: The identifier of the notification.
        eventTime:
          type: string
          format: date-time
          description: Time of the event occurrence.
        eventType:
          type: string
          description: The type of the notification.
        correlationId:
          type: string
          description: The correlation id for this event.
        domain:
          type: string
          description: The domain of the event.
        title:
          type: string
          description: The title of the event.
        description:
          type: string
          description: An explnatory of the event.
        priority:
          type: string
          description: A priority.
        timeOcurred:
          type: string
          format: date-time
          description: The time the event occured.
        fieldPath:
          type: string
          description: The path identifying the object field concerned by this notification.
        event:
          $ref: '#/components/schemas/TroubleTicketAttributeValueChangeEventPayload'
    TroubleTicketAttributeValueChangeEventPayload:
      type: object
      description: The event data structure
      properties:
        troubleTicket:
          $ref: "#/components/schemas/TroubleTicket"
    EventSubscription:
      type: object
      description: Sets the communication endpoint address the service instance must use to deliver notification information
      properties:
        id:
          type: string
          format: uuid
          description: Id of the subscription
        callback:
          type: string
          description: The callback being registered.
          maxLength: 2048
        query:
          type: string
          description: query used to notify
          maxLength: 2048
